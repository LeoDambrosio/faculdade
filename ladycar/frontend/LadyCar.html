<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lady Car - A Oficina da Mulher</title>
    <link rel="stylesheet" href="LadyCar.css">
  </head>
  <body>
    <!-- Tela de Login (inicialmente vis√≠vel) -->
    <div id="loginScreen" class="login-container">
      <div class="login-box">
        <h2>Login - Lady Car</h2>
        <form class="form-login" id="loginForm">
          <div>
            <label for="loginEmail">E-mail</label>
            <input type="email" id="loginEmail" name="email" placeholder="Digite seu e-mail" required>
          </div>
          
          <div>
            <label for="loginSenha">Senha</label>
            <input type="password" id="loginSenha" name="senha" placeholder="Digite sua senha" required>
          </div>

          <button type="submit" class="btn">Entrar</button>
        </form>

        <div class="login-links">
          <p>Ainda n√£o tem conta? <a href="#" id="goToRegister">Cadastre-se</a></p>
        </div>
      </div>
    </div>

    <!-- Tela de Cadastro (inicialmente oculta) -->
    <div id="registerScreen" class="login-container hidden">
      <div class="login-box">
        <h2>Cadastro - Lady Car</h2>
        <form class="form-login" id="registerForm">
          <div>
            <label for="registerNome">Nome completo</label>
            <input type="text" id="registerNome" name="nome" placeholder="Digite seu nome" required>
          </div>
          
          <div>
            <label for="registerEmail">E-mail</label>
            <input type="email" id="registerEmail" name="email" placeholder="Digite seu e-mail" required>
          </div>
          
          <div>
            <label for="registerSenha">Senha</label>
            <input type="password" id="registerSenha" name="senha" placeholder="Crie uma senha" required>
          </div>
          
          <div>
            <label for="registerConfirmaSenha">Confirmar Senha</label>
            <input type="password" id="registerConfirmaSenha" name="confirmaSenha" placeholder="Confirme sua senha" required>
          </div>

          <button type="submit" class="btn">Cadastrar</button>
        </form>

        <div class="login-links">
          <p>J√° tem cadastro? <a href="#" id="goToLogin">Fazer login</a></p>
        </div>
      </div>
    </div>

    <!-- Conte√∫do Principal (inicialmente oculto) -->
    <div id="mainContent" class="hidden">
      <!-- Hero -->
      <header class="hero">
        <div class="hero-content">
          <h1>Lady Car</h1>
          <p>A Oficina da Mulher</p>
          <a href="#contato" class="btn">Agende seu servi√ßo</a>
          <button class="btn" id="logoutBtn" style="margin-left: 10px;">Sair</button>
        </div>
      </header>

      <!-- Problema -->
      <section class="problema">
        <h2>Por que existimos?</h2>
        <p>Muitas mulheres se sentem inseguras em oficinas tradicionais. Falta de transpar√™ncia, medo de serem enganadas e ambientes pouco acolhedores afastam o p√∫blico feminino.</p>
        <ul class="dados">
          <li><strong>43%</strong> Falta de conhecimento</li>
          <li><strong>23%</strong> Falta de tempo</li>
          <li><strong>10%</strong> Medo de serem enganadas</li>
          <li><strong>10%</strong> Ambientes masculinos</li>
          <li><strong>14%</strong> Outros</li>
        </ul>
      </section>

      <!-- Servi√ßos -->
      <section class="servicos">
        <h2>Nossos Servi√ßos</h2>
        <div class="grid">
          <div class="card">üîß Troca de √≥leo</div>
          <div class="card">‚ö° Troca de bateria</div>
          <div class="card">üí® Calibragem de pneus</div>
          <div class="card">üå¨Ô∏è Limpeza de ar-condicionado</div>
          <div class="card">üßº Lavagem a seco</div>
          <div class="card">üöó Instala√ß√£o de acess√≥rios</div>
          <div class="card">üõ¢Ô∏è Verifica√ß√£o de fluidos</div>
          <div class="card">üõ†Ô∏è Reparo de pneus</div>
        </div>
      </section>

      <!-- Como Funciona -->
      <section class="como-funciona">
        <h2>Como Funciona</h2>
        <ol>
          <li>Voc√™ escolhe o servi√ßo no site</li>
          <li>Nossa equipe vai at√© voc√™</li>
          <li>Pagamento transparente e seguro</li>
        </ol>
      </section>

      <!-- Escalabilidade -->
      <section class="futuro">
        <h2>Nosso Futuro</h2>
        <ul>
          <li>Unidade f√≠sica especializada</li>
          <li>Expans√£o em franquias</li>
          <li>Capacita√ß√£o de mec√¢nicas mulheres</li>
        </ul>
      </section>

      <!-- Equipe -->
      <section class="equipe">
        <h2>Nossa Equipe</h2>
        <div class="grid">
          <div class="card">Leonardo Vieira Dambrosio</div>
          <div class="card">Andre Capellesso Luzzi</div>
          <div class="card">Henrique Gil Moura Morais</div>
          <div class="card">Leiticia Cezar Vieira</div>
          <div class="card">Alan Alves do Nascimento</div>
        </div>
      </section>

      <footer>
        <p>Lady Car ¬© 2025 - A Oficina da Mulher</p>
      </footer>
    </div>

    <script>
        
          async function handleLogin() {
        const email = document.getElementById('loginEmail').value;
        const senha = document.getElementById('loginSenha').value;

        const res = await fetch("http://localhost:3000/login", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email, senha })
        });

        if (res.ok) {
          const user = await res.json();
          localStorage.setItem('ladycar_loggedin', 'true');
          localStorage.setItem('ladycar_user', JSON.stringify(user));
          showMainContent();
        } else {
          const err = await res.json();
          alert(err.error);
        }
      }

      async function handleRegister() {
        const nome = document.getElementById('registerNome').value;
        const email = document.getElementById('registerEmail').value;
        const senha = document.getElementById('registerSenha').value;
        const confirmaSenha = document.getElementById('registerConfirmaSenha').value;

        if (senha !== confirmaSenha) {
          alert('As senhas n√£o coincidem.');
          return;
        }

        const res = await fetch("http://localhost:3000/register", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ nome, email, senha })
        });

        if (res.ok) {
          const user = await res.json();
          localStorage.setItem('ladycar_loggedin', 'true');
          localStorage.setItem('ladycar_user', JSON.stringify(user));
          alert('Cadastro realizado com sucesso!');
          showMainContent();
        } else {
          const err = await res.json();
          alert(err.error);
        }
      }
      
      function showLoginScreen() {
        document.getElementById('loginScreen').classList.remove('hidden');
        document.getElementById('registerScreen').classList.add('hidden');
        document.getElementById('mainContent').classList.add('hidden');
      }

      function showRegisterScreen() {
        document.getElementById('loginScreen').classList.add('hidden');
        document.getElementById('registerScreen').classList.remove('hidden');
        document.getElementById('mainContent').classList.add('hidden');
      }

      function showMainContent() {
        document.getElementById('loginScreen').classList.add('hidden');
        document.getElementById('registerScreen').classList.add('hidden');
        document.getElementById('mainContent').classList.remove('hidden');
      }
      // Trocar de tela (login <-> cadastro)
      document.getElementById("goToRegister").addEventListener("click", (e) => {
        e.preventDefault(); // impede recarregar a p√°gina
        showRegisterScreen();
      });

      document.getElementById("goToLogin").addEventListener("click", (e) => {
        e.preventDefault();
        showLoginScreen();
      });

      // Captura os submits
      document.getElementById("loginForm").addEventListener("submit", (e) => {
        e.preventDefault();
        handleLogin();
      });

      document.getElementById("registerForm").addEventListener("submit", (e) => {
        e.preventDefault();
        handleRegister();
      });

           // Ativa os bot√µes de troca de tela
      document.getElementById("goToRegister").addEventListener("click", (e) => {
        e.preventDefault();
        showRegisterScreen();
      });

      document.getElementById("goToLogin").addEventListener("click", (e) => {
        e.preventDefault();
        showLoginScreen();
      });

      // Quando clicar em Cadastrar
      document.getElementById("registerForm").addEventListener("submit", (e) => {
        e.preventDefault(); // n√£o recarrega a p√°gina
        handleRegister();
      });

      // Quando clicar em Login
      document.getElementById("loginForm").addEventListener("submit", (e) => {
        e.preventDefault();
        handleLogin();
      });

      // Bot√£o de sair
      document.getElementById("logoutBtn").addEventListener("click", () => {
        localStorage.removeItem("ladycar_loggedin");
        localStorage.removeItem("ladycar_user");
        showLoginScreen();
      });

    </script>
  </body>
</html>